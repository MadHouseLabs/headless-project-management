properties:
  configuration:
    secrets:
      - name: storage-account-key
        value: STORAGE_KEY_PLACEHOLDER
  template:
    volumes:
      - name: azure-files-volume
        storageType: AzureFile
        storageName: headlesspmdata
    containers:
      - name: headless-pm-app
        image: ghcr.io/madhouselabs/headless-project-management:latest
        resources:
          cpu: 0.5
          memory: 1Gi
        env:
          - name: SERVER_HOST
            value: "0.0.0.0"
          - name: SERVER_PORT
            value: "8080"
          - name: DATABASE_DIR
            value: "/data/db"
          - name: UPLOAD_DIR
            value: "/data/uploads"
          - name: MCP_ENABLED
            value: "true"
          - name: ADMIN_API_TOKEN
            value: "ADMIN_TOKEN_PLACEHOLDER"
          - name: AZURE_OPENAI_ENDPOINT
            value: "https://klhub-resource.openai.azure.com/"
          - name: AZURE_OPENAI_API_KEY
            value: "AZURE_OPENAI_KEY_PLACEHOLDER"
          - name: AZURE_OPENAI_EMBEDDING_DEPLOYMENT
            value: "embeds"
        volumeMounts:
          - volumeName: azure-files-volume
            mountPath: /data
    scale:
      minReplicas: 1
      maxReplicas: 3